With asynchronous messaging, request reply should be used sparingly. It is usually better to avoid the blocking nature of request reply and use basic pub/sub instead. For those rare cases when request/reply is required, Retlang supports a simple interface to exchange data.

=== Request ===

{{{
IProcessContext context = ... 

IRequestReply<string> req = context.SendRequest<string>("my.topic", "data");

string reply = req.Receive(5000).Message;

}}}

=== Async Request - Introduced in 0.2.7.0 ===
An Async request does not block the calling thread. Callbacks are used to handle the reply or timeout.
{{{

//callbacks to be invoked on context thread.
Command onTimeout = delegate{...};
OnMessage<string> reply = delegate {...};

// will return immediately and not wait for reply
context.SendAsyncRequest("my.topic", "data", reply, onTimeout, 100);
}}}

=== Reply ===

{{{
IProcessContext context2 = ...
OnMessage<string> onMsg = delegate(IMessageHeader header, string msg) 
{ 
  context2.Publish(header.ReplyTo, "reply to: " + msg); 
};
context2.Subscribe(new TopicEquals("my.topic"), onMsg);

}}}